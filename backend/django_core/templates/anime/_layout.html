{% extends 'tailwind_base.html' %}
{% load static django_vite %}


{% block head %}
    {% vite_asset 'js/vendor/easytimer.ts' %}
    {% component_css_dependencies %}
    <title>AnimeCore</title>
{% endblock %}

{% block body %}
    <div class="relative h-dvh bg-secondary">
        <div class="w-full h-full flex flex-col overflow-hidden">
            <header class="flex-none z-10">
                <navbar class="absolute top-0 flex h-[4.5rem] w-full items-center justify-between bg-surface-900/95 px-4 backdrop-blur-3xl md:static md:h-[10vh] md:bg-surface-900 md:py-[0.9375vw] md:pl-[2.1vw] md:pr-[3.75vw]">
                    <a href="/">
                        <coreproject-icon-coreproject class="w-9 md:w-[2.25vw] md:pt-[0.75vw]"></coreproject-icon-coreproject>
                    </a>
                    <div class="relative flex items-center md:static">
                        <div class="absolute left-1/2 -translate-x-1/2">
                            <a href="/anime" class="hidden md:flex">
                                <coreproject-icon-animecore class="w-[10vw]" ></coreproject-icon-animecore>
                            </a>
                            <search-form>
                                <form class="relative flex h-12 w-[65vw] items-center md:hidden">
                                    <button class="btn absolute left-4 p-0 !bg-transparent border-none" aria-label="Search">
                                        <coreproject-icon-search class="w-5"></coreproject-icon-search>
                                    </button>
                                    <input
                                        type="text"
                                        placeholder="Search for animes, mangas..."
                                        class="h-full w-full rounded-lg border-none bg-neutral pl-12 text-base font-semibold text-accent shadow-lg !ring-0 placeholder:font-medium placeholder:text-surface-200"
                                    />
                                </form>
                            </search-form>
                        </div>
                    </div>
                    {% if request.user.is_authenticated %}
                        <div class="dropdown dropdown-end flex">
                            <div tabindex="0" role="button" class="avatar btn border-none !bg-transparent p-0">
                                <div class="w-12 rounded-lg md:w-[3vw] md:rounded-[0.5vw]">
                                    <img src="https://daisyui.com/images/stock/photo-1534528741775-53994a69daeb.jpg" />
                                </div>
                            </div>
                            <ul tabindex="0" class="dropdown-content z-1 md:min-w-[12vw] md:top-[4vw] md:text-[0.9vw] md:p-[0.5vw] bg-base-100 menu md:rounded-[0.75vw]">
                                <div class="md:p-[0.75vw] md:py-[0.5vw] flex flex-col leading-none md:gap-[0.35vw]">
                                    <span class="md:text-[1vw] font-bold capitalize">{{ request.user.username }}</span>
                                    <span class="md:text-[0.75vw]">{{ request.user.email }}</span>
                                </div>
                                <div class="divider md:mb-[0.1vw] mt-0"></div>
                                {% component_block "vercel_hover" glider_container_class='' active_element_class='rounded-[0.5vw] bg-primary' direction='vertical' duration=200 %}
                                    {% fill 'items' %}
                                        <li>
                                            <a class="flex items-center md:gap-[0.5vw] md:p-[0.75vw] leading-none !text-white !bg-transparent">
                                                <coreproject-icon-user class="md:w-[1vw]"></coreproject-icon-user>
                                                Profile
                                            </a>
                                        </li>
                                        <li>
                                            <a class="flex items-center md:gap-[0.5vw] md:p-[0.75vw] leading-none !text-white !bg-transparent">
                                                <coreproject-icon-list class="md:w-[1vw]"></coreproject-icon-list>
                                                My List
                                            </a>
                                        </li>
                                        <li>
                                            <a class="flex items-center md:gap-[0.5vw] md:p-[0.75vw] leading-none !text-white !bg-transparent">
                                                <coreproject-icon-preference class="md:w-[1vw]"></coreproject-icon-preference>
                                                Preference
                                            </a>
                                        </li>
                                        <li>
                                            <a class="flex items-center md:gap-[0.5vw] md:p-[0.75vw] leading-none !text-white !bg-transparent">
                                                <coreproject-icon-settings class="md:w-[1vw]"></coreproject-icon-settings>
                                                Settings
                                            </a>
                                        </li>
                                    {% endfill %}
                                {% endcomponent_block %}
                            </ul>
                        </div>
                    {% else %}
                        <div class="flex md:gap-[0.75vw]">
                            <a href="../user/register" class="btn btn-neutral md:p-[0.9vw] md:text-[1vw] h-max min-h-max leading-none md:rounded-[0.5vw]">
                                Register
                            </a>
                            <a href="../user/login" class="btn btn-primary text-accent md:p-[0.9vw] md:text-[1vw] h-max min-h-max leading-none md:rounded-[0.5vw]">
                                Log in
                            </a>
                        </div>
                    {% endif %}
                </navbar>
            </header>
            <div class="flex-auto w-full h-full flex overflow-hidden">
                <aside class="flex-none overflow-x-hidden overflow-y-auto w-auto">
                    <div class="hidden h-full w-[6.25vw] flex-col justify-between py-[2vw] md:flex">
                        <div>
                            <div class="flex flex-col items-center">
                                <coreproject-specific-search-modal-trigger class="btn btn-warning w-[3vw] h-[3vw] p-0 rounded-[0.5vw]">
                                    <coreproject-icon-search class="w-[1.25vw] text-black" ></coreproject-icon-search>
                                </coreproject-specific-search-modal-trigger>
                            </div>
                            <coreproject-specific-search-modal></coreproject-specific-search-modal>

                            <coreproject-sidebar></coreproject-sidebar>

                        </div>
                        <div class="flex flex-col items-center">
                            <button type="button" class="btn !bg-transparent border-none w-[4vw] h-[4vw] flex-col justify-center gap-[0.45vw] p-0 text-sm">
                                <coreproject-icon-settings class="w-[1.25vw] text-white"></coreproject-icon-settings>
                                <span class="!m-0 text-[0.75vw] font-semibold capitalize leading-[1.05vw]">
                                    settings
                                </span>
                            </button>
                            <button type="button" class="btn !bg-transparent border-none w-[4vw] h-[4vw] flex-col justify-center gap-[0.45vw] p-0 text-sm">
                                <coreproject-icon-misc class="w-[1.25vw] text-white"></coreproject-icon-misc>
                                <span class="!m-0 text-[0.75vw] font-semibold capitalize leading-[1.05vw]">
                                    misc.
                                </span>
                            </button>
                        </div>
                    </div>
                </aside>
                <div id="page" class="flex-1 overflow-x-hidden flex flex-col" style="scrollbar-gutter: auto;">
                    <content
                        class='contents'
                        hx-get='{{request.get_full_path}}'
                        hx-target='this'
                        hx-trigger='load'
                    >
                     {% comment %}
                        Everything is rendered here
                     {% endcomment %}
                    </content>
                </div>
            </div>
            <footer id="shell-footer" class="flex-none">
                <div class="flex h-24 items-center justify-center md:hidden">
                    <div class="flex items-start justify-center gap-4">
                        <a href="/anime" type="button" class="flex flex-col items-center gap-[0.5vh]">
                            <div class="mask mask-squircle btn btn-primary rounded-xl p-5 h-max min-h-max">
                                <coreproject-icon-home class="w-5 text-accent"></coreproject-icon-home>
                            </div>
                            <span class="text-sm font-bold capitalize">home</span>
                        </a>
                        <a href="/anime" type="button" class="flex flex-col items-center gap-[0.5vh]">
                            <div class="mask mask-squircle btn btn-secondary rounded-xl p-5 h-max min-h-max">
                                <coreproject-icon-compass class="w-5 text-accent"></coreproject-icon-compass>
                            </div>
                            <span class="text-sm font-bold capitalize">explore</span>
                        </a>
                        <a href="/anime" type="button" class="flex flex-col items-center gap-[0.5vh]">
                            <div class="mask mask-squircle btn btn-secondary rounded-xl p-5 h-max min-h-max">
                                <coreproject-icon-chat class="w-5 text-accent"></coreproject-icon-chat>
                            </div>
                            <span class="text-sm font-bold capitalize">forum</span>
                        </a>
                    </div>
                </div>
            </footer>
        </div>
    </div>


{% endblock %}
